<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>트랜잭션, 유효성 검사, 이주</title>
  <style type="text/css">
    body {
      width: 80%;
      margin: 2% auto;
    }

    header a {
      font-size: 20px;
    }

    article {
      font-size: 20px;
      font-weight: bold;
    }

    article a {
      font-size: 20px;
      font-weight: bold;
    }

    img {
      display: block;
      margin: 0 auto;
    }

    footer a {
      font-size: 16px;
    }
  </style>
</head>

<body>
  <header>
    <a href="concept_list.html">목록으로</a>
  </header>

  <section>
    <ul>
      <li>
        <article>
          <h2>트랜잭션(Transaction)</h2>
          <p>
            트랜잭션은 데이터베이스 관리 시스템에서 상호작용의 단위를 말한다. 말이 뭔가 어렵다. 많은 블로그에서 드는 은행 업무를 가지고 예를 들어 설명해 보겠다. 다른 사람에게 돈을 보내는 송금 과정을 예로 들어보겠다.
            <br>송금하는 과정 중에서도 은행의 내부적인 것을 보겠다.
            <ol>
              <li>송신자가 송금 버튼을 누른다.(앞 과정은 생략하겠다.)</li>
              <li>송신자의 계좌에서 금액이 감소한다.</li>
              <li>수신자의 계좌에서 금액이 증가한다.</li>
              <li>송금이 완료된다.</li>
            </ol>
            여기서 만약 2번의 과정이 끝나고 난 후 3번을 시작하려는데 오류가 났다고 생각해보자. 그럼 어떻게 되겠는가? 송신자의 계좌에서는 금액이 감소 했지만, 수신자의 계좌에서는 금액이 증가하지 않았다. 이러면 문제가 되는 것이다.
            <br><br>이러한 문제를 해결하기 위해 위와 같은 과정을 트랜잭션이라는 하나의 큰 단위로 묶는다. 트랜잭션은 하나이지만 그 안에서는 여러과정을 수행한다. 여러 과정을 수행하는 중에 하나의 과정에서라도 오류가 나면 전체과정(트랜잭션)이 오류가 난 것으로 간주하고 모든것을 트랜잭션이 시작하기 전으로 리셋시킨다.
            <br> 트랜잭션이 성공하면 commit, 실패하면 rollback이라고 한다.

            <br><br>트랜잭션이 안전하게 수행된다는 것을 보장하기 위한 성질을 가리키는 <span style="color: red;">ACID</span>라는 것이 있다.
            <ul>
              <li>원자성(Atomicity) - 원자성은 위에서 설명한 것처럼 트랜잭션의 내부 과정 중 중간에 실패하는 것이 없고 전체가 성공해야 한다는 것을 말하는 용어이다.</li>
              <li>일관성(Consistency) - 트랜잭션을 하는 도중 데이터베이스에서 지정된 Rule에 부합되는 데이터들만 데이터 베이스에 유지 되어야한 다는 것을 말한다. 위의 예로 들어보자면 송금을 하려는 자신의 보유 잔액을 넘어서는 금액을 송금할 수는 없을 것이다.(잔액 데이터베이스에 -값이 안들어가지는 룰) 이러한 것을 말한다.</li>
              <li>고립성(Isolation) - 트랜잭션을 수행하는 중에 다른 트랜잭션의 연산 작업이 끼어들지 못하도록 보장하는 것을 말한다. 이것 역시 위의 예를 들어보면 공용 통장에서 내가 돈을 송금하고 있는데 다른 사람이 동시에 송금하지 못한다는 것을 말한다. 만약 고립성이 보장되지 못하면 잔액을 넘어서는 송금이 일어나는 상황이 발생할 수 있으며 이는 일관성도 유지되지 못할 수도 있다.
                <br>하지만 고립성은 ACID 중에서 성능관련 이유로 가장 유연성이 있는 제약 조건이다.</li>
              <li>지속성(Durability) - 성공적으로 수행된 트랜잭션은 영원히 반영되어야 함을 의미한다. 당연한 이야기이지만, 송금을 한 후에 남은 잔액은 다른 트랜잭션(출금, 입금)이 있을 때까지 그 잔액이 유지되어야 한다는 것을 말한다.</li>
            </ul>
          </p>
          <br>트랜잭션은 위와 같은 특징들을 가지고 있다. 데이터베이스에서 CRUD라는 것이 있다.(Create, Read, Update, Delete) 생성, 읽기, 수정, 삭제 이 중에 읽기를 제외한 나머지 3가지는 데이터베이스에 저장된 내용에 영향을 미친다. 때문에 이 3가지(생성, 수정, 삭제)는 트랜잭션으로 수행하는 것이 보통이며, 읽기의 경우 몇번을 읽더라도 같은 값을 가져오기 때문에 트랜잭션을 안하는 것이 보통이다.(아닐수도
          있으나 필자가 알기론 그렇다.)
        </article>
      </li>

      <li>
        <article>
          <h2>Validation(유효성 검사)</h2>
          <p>
            Validation이라는 말은 IT를 제외하더라도 여러 분야에서 쓰이는 것 같다. 하지만 필자는 데이터베이스와 관련된 용어로 처음 들었기 때문에 그것에 대해서 설명하겠다.
            <br><br>데이터베이스와 관련된 Validation은 유효성 검사 라는 뜻을 가진다. 이 말은 데이터베이스안에 들어가는 필드가 있고, 필드에 맞는 데이터가 점차 축적될 것이다. 이때 데이터를 필드(데이터베이스)에 집어넣기 전에 필드와 타입이 맞는지, 조건이 맞는지 등을 확인하는 것을 유효성 검사라고 한다.
            <br> 유효성 검사가 필요한 이유는 예상할 수 있는 오류의 발생을 방지 할 수 있기 때문이다. 위에서 설명했던 은행과 관련되어서 설명을 해보자면 잔액 데이터베이스에는 음수(-)가 들어가서는 안될 것이다.(마이너스 통장이 있긴하지만 넘어가자.) 이 음수가 들어가는 것은 충분히 예상 가능한 일이며 데이터베이스에 넣기 전에 검사를 통해 제대로 된 값인지를 판단할 수 있다. 이것이 유효성 검사이다.
          </p>
        </article>
      </li>

      <li>
        <article>
          <h2>Migration(마이그레이션, 이주)</h2>
          <p>
            Migration 또한 매우 광범위한 분야에서 사용된다. 하지만 이것 역시 데이터베이스와 관련된 곳에서 처음 접한 필자는 데이터베이스의 기준으로 설명하도록 하겠다.
            <br><br>데이터 베이스에서 Migration은 별 것 없다. 한 종류의 데이터베이스에서 다른 종류의 데이터베이스로 데이터를 옮기는 경우를 말한다. 또는 기존의 데이터베이스에서 필드를 추가하거나 삭제하는 등의 데이터베이스의 업그레이드를 할 때도 사용하는 것으로 보인다.
            <br>데이터베이스를 옮기는 경우는 더 좋은 성능의 데이터베이스를 찾아서 옮길 수도 있을 것이고, 필드를 추가 또는 삭제할 경우에는 데이터베이스의 업데이트를 위해 할 수 있겠다.

            <br><br>Migration을 좀더 크게 정리하자면 [현행 시스템 환경에서 새로운 환경으로 시스템을 전환하는 것을 의미하며, 광의적으로는 하드웨어, 네트워크 그리고 소프트웨어 전 분야에 걸처 이동하는 방법에서 협의로는 어플리케이션 프로그램, 데이터 베이스 그리고 미들웨어를 새로운 환경으로 이전 혹은 통합하는 것을 의미] 라고 할 수 있겠다.
          </p>
        </article>
      </li>
    </ul>

  </section>

  <br>
  <div style="border-bottom: 2px solid black;"></div>
  <footer>
    최초 작성일 : 2016-11-22 (화요일)
    <br>참고 자료
    <ul>
      <li><a href="https://ko.wikipedia.org/wiki/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4_%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98" target="_blank">데이터베이스 트랜잭션 - 위키피디아</a> </li>
      <li><a href="https://ko.wikipedia.org/wiki/ACID" target="_blank">ACID - 위키피디아</a></li>
      <li><a href="http://utk-unm.blogspot.kr/2016/08/acid.html" target="_blank">ACID란? - Software Engineering 블로그</a></li>
      <li><a href="https://en.wikipedia.org/wiki/Data_validation" target="_blank">Data Validation - 위키피디아</a></li>
<li><a href="https://mmcmobile.files.wordpress.com/2010/12/01-eba788ec9db4eab7b8eba088ec9db4ec8598-eab09cec9a94.pdf" target="_blank">제1강 마이그레이션이란 무엇인가 - 이진석CEO와 함께하는 (pdf파일) </a></li>
    </ul>
  </footer>
</body>

</html>
